<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Earth Calendar - Perennial Weekly Agenda</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåç</text></svg>">
    
    <style>
        /* Reset e base */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { 
            height: 100%; 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif; 
            font-size: 16px; 
            line-height: 1.6; 
            color: #000000; 
            background-color: #ffffff; 
        }
        
        /* Container principale */
        .container { 
            display: flex; 
            flex-direction: column; 
            min-height: 100vh; 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 0 20px; 
        }
        
        /* Header */
        .header { 
            padding: 40px 0 30px 0; 
            border-bottom: 2px solid #000000; 
            margin-bottom: 40px; 
        }
        .site-title { 
            font-weight: 400; 
            font-size: 32px; 
            letter-spacing: -0.5px; 
            margin-bottom: 8px; 
            color: #000000; 
        }
        .site-subtitle { 
            font-weight: 400; 
            font-size: 18px; 
            color: #666666; 
        }
        
        /* Navigazione settimana */
        .week-nav { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 40px; 
            padding-bottom: 20px; 
            border-bottom: 1px solid #e0e0e0; 
        }
        .week-display { 
            font-size: 20px; 
            font-weight: 500; 
            color: #000000; 
        }
        .nav-controls { 
            display: flex; 
            gap: 10px; 
        }
        .nav-btn { 
            padding: 10px 20px; 
            background: none; 
            border: 1px solid #000000; 
            color: #000000; 
            cursor: pointer; 
            transition: all 0.2s; 
            border-radius: 2px; 
            font-size: 14px; 
            text-transform: uppercase; 
            letter-spacing: 0.5px; 
        }
        .nav-btn:hover { 
            background-color: #000000; 
            color: #ffffff; 
        }
        
        /* Griglia settimanale */
        .week-grid { 
            display: grid; 
            grid-template-columns: repeat(7, 1fr); 
            gap: 14px;
            margin-bottom: 50px; 
        }
        
        /* Carta giorno */
        .day-card { 
            border: 1px solid #e0e0e0; 
            border-radius: 2px; 
            background-color: #ffffff; 
            display: flex; 
            flex-direction: column; 
            min-height: 500px; 
            transition: border-color 0.2s; 
        }
        .day-card:hover { 
            border-color: #000000; 
        }
        .day-card.today { 
            border-color: #000000; 
            border-width: 2px; 
        }
        .day-card.weekend { 
            background-color: #f8f8f8; 
        }
        
        /* Header giorno */
        .day-header { 
            padding: 10px 15px; 
            border-bottom: 1px solid #e0e0e0; 
            background-color: #f8f8f8; 
        }
        .day-name { 
            font-size: 18px; 
            font-weight: 500; 
            color: #000000; 
            text-transform: uppercase; 
            letter-spacing: 1px; 
        }
        .day-number { 
            font-size: 14px; 
            color: #666666; 
            margin-top: 4px; 
        }
        
        /* Contenuto giorno */
        .day-content { 
            flex: 1; 
            padding: 0; 
            display: flex; 
            flex-direction: column; 
        }
        .notes-textarea { 
            flex: 1; 
            width: 100%; 
            min-height: 400px; 
            padding: 15px; 
            font-family: inherit; 
            font-size: 14px; 
            line-height: 1.6; 
            color: #000000; 
            background-color: #ffffff; 
            border: none; 
            border-radius: 0; 
            resize: none; 
            transition: all 0.2s; 
        }
        .notes-textarea:focus { 
            outline: none; 
            background-color: #fcfcfc; 
        }
        .notes-textarea.weekend { 
            background-color: #f8f8f8; 
        }
        .notes-textarea.weekend:focus { 
            background-color: #f4f4f4; 
        }
        
        /* Footer giorno */
        .day-footer { 
            padding: 8px 15px; 
            border-top: 1px solid #e0e0e0; 
            background-color: #f8f8f8; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            font-size: 12px; 
            color: #666666; 
        }
        .char-count { 
            font-size: 11px; 
            text-transform: uppercase; 
            letter-spacing: 0.5px; 
        }
        .save-indicator { 
            font-size: 11px; 
            text-transform: uppercase; 
            letter-spacing: 0.5px; 
            color: #888888; 
        }
        .save-indicator.saved { 
            color: #000000; 
        }
        
        /* Controlli */
        .controls { 
            display: flex; 
            gap: 15px; 
            margin-bottom: 50px; 
            padding-top: 30px; 
            border-top: 1px solid #e0e0e0; 
        }
        .btn { 
            padding: 14px 28px; 
            font-size: 14px; 
            font-weight: 500; 
            text-transform: uppercase; 
            letter-spacing: 1px; 
            background-color: #ffffff; 
            color: #000000; 
            border: 1px solid #000000; 
            border-radius: 2px; 
            cursor: pointer; 
            transition: all 0.2s; 
            text-decoration: none; 
            display: inline-flex; 
            align-items: center; 
            justify-content: center; 
            gap: 8px; 
        }
        .btn:hover { 
            background-color: #000000; 
            color: #ffffff; 
        }
        .btn-save-all { 
            background-color: #000000; 
            color: #ffffff; 
            margin-left: auto; 
        }
        .btn-save-all:hover { 
            background-color: #333333; 
        }
        
        /* Footer */
        .footer { 
            padding: 40px 0; 
            border-top: 2px solid #000000; 
            margin-top: 40px; 
            font-size: 14px; 
            color: #666666; 
        }
        .footer-content { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            flex-wrap: wrap; 
            gap: 20px; 
        }
        .footer-links { 
            display: flex; 
            gap: 25px; 
        }
        .footer-link { 
            color: #666666; 
            text-decoration: none; 
            transition: color 0.2s; 
        }
        .footer-link:hover { 
            color: #000000; 
        }
        
        /* Messaggio di stato */
        .status-message { 
            position: fixed; 
            top: 20px; 
            right: 20px; 
            padding: 15px 25px; 
            background-color: #000000; 
            color: #ffffff; 
            border-radius: 2px; 
            font-size: 14px; 
            z-index: 1000; 
            opacity: 0; 
            transform: translateY(-10px); 
            transition: all 0.3s; 
            max-width: 400px; 
        }
        .status-message.show { 
            opacity: 1; 
            transform: translateY(0); 
        }
        
        /* Animation per loader */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Media queries */
        @media (max-width: 1200px) { 
            .week-grid { 
                grid-template-columns: repeat(4, 1fr); 
                gap: 11px;
            } 
            .notes-textarea { 
                min-height: 350px; 
            } 
        }
        
        @media (max-width: 900px) { 
            .week-grid { 
                grid-template-columns: repeat(2, 1fr); 
                gap: 14px;
            } 
            .day-card { 
                min-height: 450px; 
            } 
            .notes-textarea { 
                min-height: 300px; 
            } 
        }
        
        @media (max-width: 768px) { 
            .container { 
                padding: 0 15px; 
            } 
            .header { 
                padding: 30px 0 20px 0; 
            } 
            .site-title { 
                font-size: 28px; 
            } 
            .site-subtitle { 
                font-size: 16px; 
            } 
            .week-nav { 
                flex-direction: column; 
                align-items: flex-start; 
                gap: 20px; 
            } 
            .nav-controls { 
                align-self: flex-end; 
            } 
            .week-grid { 
                grid-template-columns: 1fr; 
                gap: 14px;
            } 
            .day-card { 
                min-height: 400px; 
            } 
            .notes-textarea { 
                min-height: 250px; 
            } 
            .controls { 
                flex-wrap: wrap; 
            } 
            .btn { 
                flex: 1; 
                min-width: 120px; 
            } 
            .footer-content { 
                flex-direction: column; 
                text-align: center; 
                gap: 15px; 
            } 
            .footer-links { 
                justify-content: center; 
            } 
        }
        
        @media (max-width: 480px) { 
            .day-header { 
                padding: 8px 12px;
            } 
            .notes-textarea { 
                min-height: 200px; 
                padding: 12px;
            } 
            .day-footer { 
                padding: 6px 12px;
            } 
            .controls { 
                flex-direction: column; 
            } 
            .btn { 
                width: 100%; 
            } 
            .status-message { 
                left: 20px; 
                right: 20px; 
                top: 10px; 
            } 
        }

        /* Desktop largo */
        @media (min-width: 1400px) {
            .container {
                max-width: 1600px;
                padding: 0 40px;
            }
            
            .week-grid {
                gap: 18px;
            }
            
            .day-card {
                min-height: 550px;
            }
            
            .notes-textarea {
                min-height: 450px;
                font-size: 15px;
                padding: 17px;
            }
            
            .day-header {
                padding: 13px 17px;
            }
            
            .day-name {
                font-size: 20px;
            }
            
            .day-footer {
                padding: 10px 17px;
            }
            
            .controls {
                gap: 20px;
            }
            
            .btn {
                padding: 16px 32px;
                font-size: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- STATUS MESSAGE -->
    <div id="statusMessage" class="status-message"></div>

    <div class="container">
        <!-- HEADER -->
        <header class="header">
            <h1 class="site-title">The Earth Calendar</h1>
            <div class="site-subtitle">Perennial Weekly Agenda</div>
        </header>

        <!-- WEEK NAVIGATION -->
        <div class="week-nav">
            <div class="week-display" id="currentDateDisplay">
                <!-- Popolato dinamicamente -->
            </div>
            <div class="nav-controls">
                <button class="nav-btn" id="prevWeek">‚Üê Previous Week</button>
                <button class="nav-btn" id="todayWeek">Current Week</button>
                <button class="nav-btn" id="nextWeek">Next Week ‚Üí</button>
            </div>
        </div>

        <!-- WEEK GRID - 7 DAYS TEC -->
        <div class="week-grid" id="weekGrid">
            <!-- Popolato dinamicamente via JavaScript -->
        </div>

        <!-- CONTROLS -->
        <div class="controls">
            <button class="btn" id="exportAllBtn">
                Export All Data
            </button>
            <button class="btn" id="importAllBtn">
                Import All Data
            </button>
            <button class="btn btn-save-all" id="saveAllBtn">
                Save All Changes
            </button>
        </div>

        <!-- FOOTER -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-copyright">
                    The Earth Calendar Perennial Weekly Agenda ‚Ä¢ Version 1.0 TEC
                </div>
                <div class="footer-links">
                    <a href="https://earthcal.hyperlinker.org" class="footer-link" target="_blank">The Earth Calendar site</a>
                    <a href="https://hyperlinker.org/tec/dt/api/index.html" class="footer-link" target="_blank">APIs available here</a>
                    <a href="https://epoch.hyperlinker.org" class="footer-link" target="_blank">Concordance with Epoch Time</a>
                </div>
            </div>
        </footer>
    </div>

    <!-- JavaScript files - ORDINE CORRETTO TEC -->
    <script src="tec_date.js"></script>
    <script src="db.js"></script>
    <script src="agenda.js"></script>
</body>
</html>
